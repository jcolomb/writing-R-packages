<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Syllabus • writingRPackages</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/darkly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script>




<meta property="og:title" content="Syllabus" />






<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  

  

  </head>

  <body data-spy="scroll" data-target="#toc">
    

    <div class="container template-title-body">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">writingRPackages</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a></a>
</li>
<li>
  <a></a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="notes.html">Notes</a>
</li>
<li>
  <a href="slides.html">Slides</a>
</li>
<li>
  <a href="resources.html">Resources</a>
</li>
<li>
  <a href="index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/uf-repro/writing-R-packages/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="contents col-md-9">
    <div class="page-header">
      <h1>Syllabus</h1>
    </div>

<div id="syllabus" class="section level1">

<p>Hao Ye Health Science Center Libraries, University of Florida (updated: 2021-02-16)</p>
<div id="intro" class="section level2">
<h2 class="hasAnchor">
<a href="#intro" class="anchor"></a>Intro</h2>
<ul>
<li>Motivations R packages are the primary means of bundling R code and facilitate many use cases, including:
<ul>
<li>re-using code or data across projects</li>
<li>writing open source software</li>
<li>creating reproducible analyses</li>
</ul>
</li>
<li>Learning Outcomes By the end of the workshop, participants will be able to:
<ul>
<li>create working R packages with code and data</li>
<li>write documentation using <code>roxygen2</code>
</li>
<li>describe additional package-related tools (e.g. <code>pkgdown</code>, <code>testthat</code>)</li>
</ul>
</li>
</ul>
</div>
<div id="creating-r-packages" class="section level2">
<h2 class="hasAnchor">
<a href="#creating-r-packages" class="anchor"></a>Creating R Packages</h2>
<ul>
<li>
<p>Setup Before getting started, we want some tools that help make creating packages easier.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"devtools"</span>, <span class="st">"roxygen2"</span>, 
                   <span class="st">"testthat"</span>, <span class="st">"knitr"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
</li>
<li>
<p>Creating a new R package</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">devtools</span><span class="fu">::</span><span class="fu">create</span><span class="op">(</span><span class="st">"myDemoPkg"</span><span class="op">)</span></code></pre></div>
<pre class="hljs remark-code">
myDemoPkg
├── .gitignore
├── .Rbuildignore
├── DESCRIPTION
├── myDemoPkg.Rproj
├── NAMESPACE
└── R/
</pre>
<ul>
<li>package names have to start with a letter and can only contain letters, numbers, and periods.</li>
</ul>
</li>
<li>
<p>What are these files?</p>
<ul>
<li>
<code>.gitignore</code> tells git to NOT track certain files</li>
<li>
<code>.Rbuildignore</code> tells R to NOT include certain files when building the package</li>
<li>
<code>DESCRIPTION</code> contains basic metadata about the package</li>
<li>
<code>myDemoPkg.Rproj</code> is the RStudio project</li>
<li>
<code>NAMESPACE</code> lists the objects that are loaded with the package</li>
<li>
<code>R/</code> contains R function definitions</li>
</ul>
</li>
<li>
<p>Building the Package</p>
<ul>
<li>R Console</li>
</ul>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install</span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p>OR</p>
<ul>
<li>RStudio Build Pane <img src="rstudio_build.png" title="A cropped screenshot of the 'Build' Pane in the RStudio interface, showing a panel with tabs for 'Plots', 'Packages', 'Help, 'Build', and 'Viewer' on the left and buttons with the minimize and maximize icons on the right. The 'Build' tab is selected, showing 3 additional buttons at the top of the tab: 'Install and Restart' (with a hammer icon), 'Check' (with a checklist icon), and 'More' (with a gear icon and an arrow indicating a pulldown menu). There is a magenta oval around the 'Install and Restart' button." alt="A cropped screenshot of the 'Build' Pane in the RStudio interface, showing a panel with tabs for 'Plots', 'Packages', 'Help, 'Build', and 'Viewer' on the left and buttons with the minimize and maximize icons on the right. The 'Build' tab is selected, showing 3 additional buttons at the top of the tab: 'Install and Restart' (with a hammer icon), 'Check' (with a checklist icon), and 'More' (with a gear icon and an arrow indicating a pulldown menu). There is a magenta oval around the 'Install and Restart' button.">
</li>
</ul>
</li>
<li>
<p>Fully Operational!</p>
<ul>
<li>The package can be built and installed.</li>
<li>Next Steps:
<ul>
<li>syncing to GitHub</li>
<li>adding DESCRIPTION info</li>
<li>adding data and code</li>
<li>adding documentation</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div id="syncing-to-github" class="section level2">
<h2 class="hasAnchor">
<a href="#syncing-to-github" class="anchor"></a>Syncing to GitHub</h2>
<ul>
<li>Why GitHub?
<ul>
<li>
<p>Cloud-based backup of your new package</p>
<ul>
<li>private repos are only visible to whom you give access to</li>
</ul>
</li>
<li>
<p>Supports installation from GitHub</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html">install_github</a></span><span class="op">(</span><span class="st">"{username}/{repo}"</span><span class="op">)</span>
<span class="co"># remotes::install_github("ha0ye/myDemoPkg")</span></code></pre></div>
<ul>
<li>private repos, too, IF you have a personal access token (PAT) set up appropriately</li>
</ul>
</li>
</ul>
</li>
<li>Setup (local)
<ul>
<li>Install Git and register a GitHub account - https://happygitwithr.com/install-intro.html</li>
<li>Create a Git repo for the project and make an initial commit</li>
</ul>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">usethis</span><span class="fu">::</span><span class="fu">use_git</span><span class="op">(</span><span class="op">)</span></code></pre></div>
</li>
<li>Setup (GitHub, via <code>usethis</code>)
<ul>
<li>Using a personal access token (PAT) that is setup with permissions to create repos</li>
</ul>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">usethis</span><span class="fu">::</span><span class="fu">use_github</span><span class="op">(</span><span class="op">)</span></code></pre></div>
OR</li>
<li>Setup (GitHub, manual)
<ul>
<li>create a new repository
<ul>
<li>ideally same name as your package folder</li>
<li>choose public or private</li>
<li>SKIP initialization</li>
</ul>
</li>
<li>RStudio, click “New Branch” on the “Git”Pane <img src="rstudio_new-branch.png" title="A cropped screenshot of the 'Git' Pane in the RStudio interface, showing a panel with tabs for 'Files', 'Connections', 'Git', and 'Tutorial'. The 'Git' tab is selected, showing another row of buttons, including a button with an icon of a white diamond adjoined to 2 purple rectangles by straight lines. This button is centered in a magenta oval." alt="A cropped screenshot of the 'Git' Pane in the RStudio interface, showing a panel with tabs for 'Files', 'Connections', 'Git', and 'Tutorial'. The 'Git' tab is selected, showing another row of buttons, including a button with an icon of a white diamond adjoined to 2 purple rectangles by straight lines. This button is centered in a magenta oval.">
</li>
</ul>
</li>
<li>Setup (GitHub, manual)
<ul>
<li>Click “Add Remote”
<ul>
<li>use <code>origin</code> for the “Remote Name”</li>
<li>copy-paste URL from GitHub (shown after creating new repo) for “Remote URL” <img src="rstudio_add-remote.png" title="A cropped screenshot of the 'Add Remote' dialog box in the RStudio interface, showing text boxes labeled 'Remote Name' and 'Remote URL', and buttons for 'Add' and 'Cancel'. The 'Remote Name' text box is filled with 'origin' and the 'Remote URL' text box is filled with 'git@github.com:ha0ye/myDemoPkg.git'" alt="A cropped screenshot of the 'Add Remote' dialog box in the RStudio interface, showing text boxes labeled 'Remote Name' and 'Remote URL', and buttons for 'Add' and 'Cancel'. The 'Remote Name' text box is filled with 'origin' and the 'Remote URL' text box is filled with 'git@github.com:ha0ye/myDemoPkg.git'">
</li>
</ul>
</li>
</ul>
</li>
<li>Setup (GitHub, manual)
<ul>
<li>Choose the same “Branch Name” as your Git panel shows. <img src="rstudio_branch-name.png" title="A cropped screenshot of the 'Git' Pane in the RStudio interface, showing a panel with tabs for 'Files', 'Connections', 'Git', and 'Tutorial'. The 'Git' tab is selected, showing another row of buttons, including a text label of 'Master' with a pulldown menu icon. The screenshot also contains a dialog box, labeled 'New Branch', with a textbox 'Branch Name' also containing 'Master', a selection menu labeled 'Remote', a button to 'Add Remote...', a checked check box labeled 'Sync box with remote', and two buttons labeled 'Create' and 'Cancel'." alt="A cropped screenshot of the 'Git' Pane in the RStudio interface, showing a panel with tabs for 'Files', 'Connections', 'Git', and 'Tutorial'. The 'Git' tab is selected, showing another row of buttons, including a text label of 'Master' with a pulldown menu icon. The screenshot also contains a dialog box, labeled 'New Branch', with a textbox 'Branch Name' also containing 'Master', a selection menu labeled 'Remote', a button to 'Add Remote...', a checked check box labeled 'Sync box with remote', and two buttons labeled 'Create' and 'Cancel'.">
</li>
<li>Select “Overwrite” at the warning about a local branch already existing.</li>
</ul>
</li>
<li>Demo</li>
<li>Workflow
<ul>
<li>update the package</li>
<li>commit the changes</li>
<li>push to GitHub</li>
</ul>
</li>
</ul>
</div>
<div id="updating-description" class="section level2">
<h2 class="hasAnchor">
<a href="#updating-description" class="anchor"></a>Updating DESCRIPTION</h2>
<ul>
<li>Parts of a DESCRIPTION
<ul>
<li>package name</li>
<li>1 sentence title</li>
<li>version number</li>
<li>package authors</li>
<li>1 paragraph description</li>
<li>license</li>
<li>dependencies</li>
</ul>
</li>
<li>Editing DESCRIPTION
<ul>
<li>most fields can be filled out by hand (just once)</li>
<li>a license determines how you allow other people to use it
<ul>
<li>usethis has defaults built-in:</li>
</ul>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">usethis</span><span class="fu">::</span><span class="fu">use_mit_license</span><span class="op">(</span><span class="op">)</span>  </code></pre></div>
<ul>
<li>see also https://choosealicense.com/</li>
</ul>
</li>
</ul>
</li>
<li>Adding Dependencies
<ul>
<li>For functions other than those in the <code>base</code> package, the package needs to be listed as a dependency, and the package referred to by <code>{pkg}::{fun}</code>.</li>
<li>The <code>use_package</code> function will add a package to the dependencies in <code>DESCRIPTION</code>.</li>
</ul>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">usethis</span><span class="fu">::</span><span class="fu">use_package</span><span class="op">(</span><span class="st">"utils"</span><span class="op">)</span></code></pre></div>
</li>
</ul>
</div>
<div id="data-and-code" class="section level2">
<h2 class="hasAnchor">
<a href="#data-and-code" class="anchor"></a>Data and Code</h2>
<ul>
<li>Code
<ul>
<li>Create functions in files within the <code>R/</code> folder.</li>
</ul>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">f</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">df</span><span class="op">)</span>
<span class="op">{</span>
  <span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span>
<span class="op">}</span></code></pre></div>
</li>
<li>Exporting functions
<ul>
<li>
<code>NAMESPACE</code> needs to include the names of objects to be loaded alongside the package.</li>
<li>Adding a special comment allows us to call <code>devtools::document()</code> to modify <code>NAMESPACE</code>:</li>
</ul>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">#' @export</span>
<span class="va">f</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">df</span><span class="op">)</span>
<span class="op">{</span>
  <span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span>
<span class="op">}</span></code></pre></div>
</li>
<li>Adding datasets
<ul>
<li>Use <code>usethis::use_data()</code> to export a dataset to a file and add that file to the package:</li>
</ul>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, y <span class="op">=</span> <span class="fl">5</span><span class="op">:</span><span class="fl">7</span><span class="op">)</span>
<span class="fu">usethis</span><span class="fu">::</span><span class="fu">use_data</span><span class="op">(</span><span class="va">dat</span><span class="op">)</span> <span class="co"># no quotes</span></code></pre></div>
</li>
</ul>
</div>
<div id="documentation" class="section level2">
<h2 class="hasAnchor">
<a href="#documentation" class="anchor"></a>Documentation</h2>
<ul>
<li>
<p>roxygen2</p>
<ul>
<li>R expects documentation to be written in a specific format, <code>.rd</code>, and stored in the <code>man/</code> folder
<ul>
<li>this is a pain.</li>
</ul>
</li>
<li>
<code>roxygen2</code> adopts the idea of <code>doxygen</code> for R:
<ul>
<li>code and documentation appear together (specific comments get turned into docs)</li>
<li>easier to maintain consistency</li>
</ul>
</li>
</ul>
</li>
<li>
<p>Example</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">#' Get the column names of a data.frame</span>
<span class="co">#' @param df A data.frame</span>
<span class="co">#' @return a character vector</span>
<span class="co">#' @export</span>
<span class="va">f</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">df</span><span class="op">)</span>
<span class="op">{</span>
  <span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span>
<span class="op">}</span></code></pre></div>
</li>
<li>
<p>Data</p>
<ul>
<li>Datasets can be documented, usually within <code>data.R</code>:</li>
</ul>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">#' Example data.frame</span>
<span class="co">#'</span>
<span class="co">#' @format A data frame with 3 rows and 2 variables:</span>
<span class="co">#' \describe{</span>
<span class="co">#'   \item{x}{some numbers}</span>
<span class="co">#'   \item{y}{some other numbers}</span>
<span class="co">#' }</span>
<span class="st">"dat"</span></code></pre></div>
</li>
</ul>
</div>
<div id="extras" class="section level2">
<h2 class="hasAnchor">
<a href="#extras" class="anchor"></a>Extras</h2>
<ul>
<li>Some other useful add-ons
<ul>
<li>writing tests for your functions?<br>
check out <a href="https://testthat.r-lib.org/"><code>testthat</code></a>
</li>
<li>want a nice website for your package?<br>
check out <a href="https://testthat.r-lib.org/"><code>pkgdown</code></a>
</li>
<li>want tests and the pkgdown website to run automatically on github? check out <a href="https://github.com/r-lib/actions/tree/master/examples">github actions</a>
</li>
</ul>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">usethis</span><span class="fu">::</span><span class="fu">use_github_action</span><span class="op">(</span><span class="st">"check-release"</span><span class="op">)</span></code></pre></div>
</li>
</ul>
</div>
<div id="research-compendia" class="section level2">
<h2 class="hasAnchor">
<a href="#research-compendia" class="anchor"></a>Research Compendia</h2>
<ul>
<li>Research Compendia ### Q: How do you share a data analysis reproducibly? ### A: Turn it into an R package!
<ul>
<li>write functions to do analysis</li>
<li>include data, or code to retrieve data</li>
<li>write-up workflow as a package vignette
<ul>
<li>see https://r-pkgs.org/vignettes.html</li>
</ul>
</li>
</ul>
</li>
<li>Benefits
<ul>
<li>Your project follows the common structure of an R package.
<ul>
<li>dependencies have to be listed</li>
<li>functions preferred over scripts</li>
<li>tests are more naturally created</li>
</ul>
</li>
<li>example - https://github.com/ha0ye/portalDS</li>
</ul>
</li>
</ul>
</div>
<div id="summary" class="section level2">
<h2 class="hasAnchor">
<a href="#summary" class="anchor"></a>Summary</h2>
<ul>
<li>Summary
<ul>
<li>even simple packages can be handy
<ul>
<li>shared code for your lab</li>
<li>custom ggplot themes for yourself</li>
</ul>
</li>
<li>structuring your work in packages promotes re-use and reproducibility ## Thanks</li>
</ul>
</li>
<li>Let me know what content you’d like to see</li>
<li>Contact me for additional questions or consultation requests!</li>
<li>Check back in on the libguide for more modules and contact info:
<ul>
<li>https://guides.uflib.ufl.edu/reproducibility</li>
</ul>
</li>
</ul>
</div>
</div>

  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>

</div>



      <footer>
      <div class="copyright">
  <p>Developed by Hao Ye.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.9000.</p>
</div>

      </footer>
   </div>

  


  

  </body>
</html>


